<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 대시보드</title>
    <link rel="stylesheet" href="/css/baseball-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="/icons/icon.png">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-logo">
                <h1><i class="fas fa-baseball-ball"></i> 관리자 대시보드</h1>
                <div class="admin-controls" style="margin:8px 0;">
                    <span id="admin-user-info" style="color: #27ae60; font-weight: bold;"><i class="fas fa-user-shield"></i> 관리자 로그인됨</span>
                    <button id="admin-logout-btn" style="margin-left: 10px; padding: 5px 10px; background: #e74c3c; color: white; border: none; border-radius: 4px; cursor: pointer;"><i class="fas fa-sign-out-alt"></i> 로그아웃</button>
                </div>
                <div class="subtitle">
                    <span class="kbo-style">여기 회장들 안주만들어 먹다가 둘다 100kg가 넘었대</span>
                    <p>실시간 주문 현황 관리</p>
                </div>
            </div>

            <!-- <section style="margin:16px 0; padding:12px; border:1px solid #ddd; border-radius:8px;">
                <h3>테이블 슬러그 일괄 발급</h3>
                <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
                    <input id="bulk-prefix" placeholder="접두사 (예: A-)" value="A-" />
                    <input id="bulk-start" type="number" placeholder="시작 번호" value="1" min="1" />
                    <input id="bulk-end" type="number" placeholder="끝 번호" value="50" min="1" />
                    <label><input id="bulk-active" type="checkbox" checked> 활성화</label>
                    <button id="bulk-ensure-btn">일괄 발급</button>
                    <a id="bulk-download" download="tables.csv" style="display:none;">CSV 다운로드</a>
                </div>
                <pre id="bulk-result" style="margin-top:8px; max-height:240px; overflow:auto; background:#fafafa; padding:8px;"></pre>
            </section> -->
            <!-- 주문 번호로 조회/확정 -->
             
            <section style="margin:16px 0; padding:12px; border:1px solid #ddd; border-radius:8px;">
            <h3>주문 번호로 조회/확정</h3>
            <form id="order-search-form" style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
                <input id="order-search-id" type="number" placeholder="주문 번호 입력 (예: 123)" min="1" required />
                <button type="submit">조회</button>
            </form>
            <div id="order-inspect" style="margin-top:12px;"></div>
            </section>

            <div class="baseball-scoreboard">
                <div class="score-info">
                    <span class="inning"><i class="fas fa-stadium"></i> 운영 상황</span>
                    <span class="score">대기팀: <span id="waiting-teams">0</span>팀</span>
                </div>
                <div class="notification-controls">
                    <button id="notification-toggle" class="notification-btn" title="알림 설정">
                        <i class="fas fa-bell"></i> 알림 ON
                    </button>
                    <button id="test-sound-btn" class="notification-btn" title="소리 테스트">
                        <i class="fas fa-volume-up"></i> 테스트
                    </button>
                    <a href="kitchen.html" target="_blank" class="notification-btn" title="주방 디스플레이">
                        <i class="fas fa-utensils"></i> 주방
                    </a>
                </div>
            </div>
            
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-orders">0</div>
                    <div class="stat-label">총 주문</div>
                </div>
                <div class="stat-card payment-pending-stat">
                    <div class="stat-number" id="payment-pending-orders">0</div>
                    <div class="stat-label"><i class="fas fa-credit-card"></i> 입금대기</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pending-orders">0</div>
                    <div class="stat-label">준비중</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completed-orders">0</div>
                    <div class="stat-label">완료</div>
                </div>
            </div>

            <!-- 매출 현황 섹션 -->
            <div class="sales-dashboard">
                <div class="sales-card">
                    <div class="sales-header">💰 오늘 매출</div>
                    <div class="sales-amount" id="today-sales">0원</div>
                    <div class="sales-detail">
                        <span>완료된 주문: <span id="today-completed">0</span>건</span>
                        <span>평균 주문금액: <span id="avg-order">0</span>원</span>
                    </div>
                </div>
                <div class="sales-card">
                    <div class="sales-header">⏰ 실시간 현황</div>
                    <div class="current-time" id="current-time">--:--</div>
                    <div class="sales-detail">
                        <span>시간당 주문: <span id="hourly-orders">0</span>건</span>
                        <span>예상 대기시간: <span id="estimated-wait">-</span></span>
                    </div>
                </div>
                <div class="sales-card">
                    <div class="sales-header">🔥 인기 메뉴</div>
                    <div class="top-menu" id="top-selling-menu">-</div>
                    <div class="sales-detail">
                        <span id="top-menu-count">0건 주문됨</span>
                        <span id="menu-percentage">전체의 0%</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- 재고 관리 섹션 -->
        <section class="inventory-section">
            <h2><i class="fas fa-boxes"></i> 메뉴별 재고 현황</h2>
            <div id="inventory-list">
                <!-- 메뉴별 재고가 여기에 표시됩니다 -->
            </div>
        </section>

        <main id="admin-dashboard">
            <!-- 실시간 주문이 여기에 표시됩니다. -->
        </main>
    </div>

    <!-- Firebase SDK (v8) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <!-- Firebase 설정 및 관리자 로직 -->
    <script src="/js/firebase-config.js"></script>
    <script src="/js/config.js"></script>
    <script type="module" src="/js/admin.js"></script>
</body>
</html>